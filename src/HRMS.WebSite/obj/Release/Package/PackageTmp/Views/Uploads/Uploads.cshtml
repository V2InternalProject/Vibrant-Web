@model HRMS.Models.UploadHRDocumentsViewModel
@{
    ViewBag.Title = "File Upload";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("../../Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("../../Scripts/jquery.form.js")" type="text/javascript"></script>
<script src="../../Scripts/Global.min.js" type="text/javascript"></script>
<link href="../../Content/New%20Design/employee.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/New%20Design/common.js" type="text/javascript"></script>
<script type="text/javascript">

    $.ajaxSetup({
        // Disable caching of AJAX responses
        cache: false
    });

    $(document).ready(function () {
        $(".ValidationDropDown").each(function () {
            $('.ValidationDropDown').show();
            $('.ValidationDropDown').css({ 'display': 'block !important', 'visibility': 'hidden' });
            $('.ValidationDropDown').next(".selectBox-dropdown").css({ 'position': 'relative', 'visibility': 'visible', 'top': '-20px' });
            $('.ValidationDropDown').next(".selectBox-dropdown").next(".qualif-detail").css({ 'margin-top': '-20px' });
        });

        if ('@Model.SearchedUserDetails.UserRole' == '@HRMS.Models.UserRoles.RMG') {
            $("#frmUploadHRDocument").hide();
            $("#showDetails").hide();
        } else {
            $("#frmUploadHRDocument1").hide();
        }

        if ('@Model.SearchedUserDetails.UserRole' == '@HRMS.Models.UserRoles.HRAdmin') {
            $("#frmUploadRMGDocument").hide();
            $("#showRMGDetails").hide();
        } else {
            $("#frmUploadRMGDocument1").hide();
        }

        $("#FileUpload1").bind("change", function (event) {            
            var path = $(this).val().replace("C:\\fakepath\\", "");
            $("#FileEmpField1").val(path);
        });

        $("#RMGphoto").bind("change", function (event) {           
            var path = $(this).val().replace("C:\\fakepath\\", "");
            $("#FileRMGphotoField").val(path);
        });
        $("#photo").bind("change", function (event) {           
            var path = $(this).val().replace("C:\\fakepath\\", "");
            $("#FileEmpFieldH").val(path);
        });

        $('#photo').change(function () {
            var file = $('input[type="file"]').val();
            var exts = ['exe'];
            // first check if file field has any value
            if (file) {
                $("#fileUploadError").text("");
                // split file name at dot
                var get_ext = file.split('.');
                // reverse name to check extension
                get_ext = get_ext.reverse();
                // check file type is valid as given in 'exts' array
                if ($.inArray(get_ext[0].toLowerCase(), exts) == 0) {
                    $("#UploadError").dialog({
                        title: 'Error',
                        resizable: false,
                        height: 'auto',
                        width: 300,
                        modal: true,
                        buttons: {
                            Ok: function () {
                                $(this).dialog("close");
                                if ($.browser.msie) {
                                    $('#photo').replaceWith($('#photo').clone(true));
                                }
                                else {
                                    $('#photo').val('');
                                }

                                $('#txtFileDescription').val('');
                                $('#txtCurrentState').val('');
                                $("#UploadTypeId").next().find(".sbSelector").text("Select");
                            }
                        },
                        close: function () {
                            if ($.browser.msie) {
                                $('#photo').replaceWith($('#photo').clone(true));
                            }
                            else {
                                $('#photo').val('');
                            }
                            $('#txtFileDescription').val('');
                            $('#txtCurrentState').val('');
                            $("#UploadTypeId").next().find(".sbSelector").text("Select");
                        }
                    });
                }
            }
        });



        $('#RMGphoto').change(function () {
            var file = $('input[type="file"]').val();
            var exts = ['exe'];
            // first check if file field has any value
            if (file) {
                $("#fileUploadError").text("");
                // split file name at dot
                var get_ext = file.split('.');
                // reverse name to check extension
                get_ext = get_ext.reverse();
                // check file type is valid as given in 'exts' array
                if ($.inArray(get_ext[0].toLowerCase(), exts) == 0) {
                    $("#UploadError").dialog({
                        title: 'Error',
                        resizable: false,
                        height: 'auto',
                        width: 300,
                        modal: true,
                        buttons: {
                            Ok: function () {
                                $(this).dialog("close");
                                if ($.browser.msie) {
                                    $('#RMGphoto').replaceWith($('#RMGphoto').clone(true));
                                }
                                else {
                                    $('#RMGphoto').val('');
                                }

                                $('#txtRMGFileDescription').val('');
                                $('#txtRMGCurrentState').val('');
                            }
                        },
                        close: function () {
                            if ($.browser.msie) {
                                $('#RMGphoto').replaceWith($('#RMGphoto').clone(true));
                            }
                            else {
                                $('#RMGphoto').val('');
                            }
                            $('#txtRMGFileDescription').val('');
                            $('#txtRMGCurrentState').val('');
                        }
                    });
                }
            }
        });


        $("#jqTableHrUploadDoc").jqGrid({
            // Ajax related configurations
            url: '@Url.Action("LoadHRUploadDetails", "Uploads")',
            datatype: "json",
            mtype: "POST",
            // Specify the column names
            colNames: ["Id", "DocumentID", "Type", "File Description", "File Name", "FilePath", "", ""],
            // Configure the columns
            colModel: [
             { name: "Id", index: "id", width: 40, align: "left", hidden: true },
             { name: "DocumentID", index: "DocumentID", width: 40, align: "left", hidden: true },
			 { name: "UploadType", index: "UploadType", width: 35, align: "left", sortable: true },
			 { name: "FileDescription", index: "FileDescription", width: 35, align: "left", sortable: true },
             { name: "FileName", index: "FileName", width: 40, align: "left", sortable: true },
             { name: "FilePath", index: "FilePath", width: 35, align: "left", formatter: 'showlink', hidden: true },
			 { name: 'Details', index: "Details", width: 15, align: "left", formatter: function () { return '<span style="text-decoration:underline;cursor:pointer;">Details</span>'; } },
			 { name: "Delete", index: "Delete", width: 7, align: "center", formatter: function () { return '<img src="../../Images/New Design/delete-icon.png" width="21px" height="25px">'; } }
            ],

            // Grid total width and height
            width: 750,
            height: 200,
            // Paging
            toppager: false,

            jsonReader: { repeatitems: false },
            pager: $("#jqTablePagerHrUploadDoc"),
            rowNum: 20,
            rowList: [],
            viewrecords: true, // Specify if "total number of records" is displayed
            height: 'auto',
            autowidth: false,
            // Grid caption
            //caption: "Upload Document Details",
            gridComplete: function () {
                var grid = $(this).getRowData();
                var count = jQuery("#jqTableHrUploadDoc").jqGrid('getGridParam', 'records');
                if (count == 0) {
                    $('#gbox_jqTableHrUploadDoc').hide();
                }
                else {
                    $('#gbox_jqTableHrUploadDoc').show();
                    if (count > 20) {

                        $('#jqTablePagerHrUploadDoc').show();
                    }
                    else {
                        $('#jqTablePagerHrUploadDoc').hide();
                    }
                }
            },
            onCellSelect: function (rowid, iCol) {
                var rowData = $(this).getRowData(rowid);
                var selectedDocumentId = rowData['DocumentID'];
                if (iCol == 7) {
                    DeleteUploadDocsDetail(selectedDocumentId);
                }
                else {

                    if (iCol == 6) {
                        ShowHRDocUploadHistoryDetails(selectedDocumentId, rowData['UploadType']);
                    }
                }
            }
        }).navGrid("#jqTablePagerHrUploadDoc",
            { search: false, refresh: false, add: false, edit: false, del: false },
                {}, // settings for edit
                {}, // settings for add
                {}, // settings for delete
                {} // Search options. Some options can be set on column level
         );


        //                  //                   RMG GIRD STARTS FROM BELOW


        $("#jqTableRMGUploadDoc").jqGrid({
            // Ajax related configurations
            url: '@Url.Action("LoadRMGUploadDetails", "Uploads")',
            datatype: "json",
            mtype: "POST",
            // Specify the column names
            colNames: ["Id", "DocumentID", "Type", "File Description", "File Name", "FilePath", "", ""],
            // Configure the columns
            colModel: [
             { name: "Id", index: "id", width: 40, align: "left", hidden: true },
             { name: "DocumentID", index: "DocumentID", width: 40, align: "left", hidden: true },
			 { name: "UploadType", index: "UploadType", width: 35, align: "left", sortable: true, hidden: true },
			 { name: "FileDescription", index: "FileDescription", width: 35, align: "left", sortable: true },
             { name: "FileName", index: "FileName", width: 40, align: "left", sortable: true },
             { name: "FilePath", index: "FilePath", width: 35, align: "left", formatter: 'showlink', hidden: true },
			 { name: 'Details', index: "Details", width: 15, align: "left", formatter: function () { return '<span style="text-decoration:underline;cursor:pointer;">Details</span>'; } },
			 { name: "Delete", index: "Delete", width: 7, align: "center", formatter: function () { return '<img src="../../Images/New Design/delete-icon.png" width="21px" height="25px">'; } }
            ],

            // Grid total width and height
            width: 750,
            height: 200,
            // Paging
            toppager: false,
            jsonReader: { repeatitems: false },
            pager: $("#jqTablePagerRMGUploadDoc"),
            rowNum: 20,
            rowList: [],
            viewrecords: true, // Specify if "total number of records" is displayed
            height: 'auto',
            autowidth: false,
            // Grid caption
            //caption: "RMG Upload Document Details",
            gridComplete: function () {
                var grid = $(this).getRowData();
                var count = jQuery("#jqTableRMGUploadDoc").jqGrid('getGridParam', 'records');
                if (count == 0) {
                    $('#gbox_JourneyTable').hide();
                }
                else {
                    $('#gbox_JourneyTable').show();
                    if (count > 20) {

                        $('#jqTablePagerRMGUploadDoc').show();
                    }
                    else {
                        $('#jqTablePagerRMGUploadDoc').hide();
                    }
                }
            },
            onCellSelect: function (rowid, iCol) {
                var rowData = $(this).getRowData(rowid);
                var selectedDocumentId = rowData['DocumentID'];
                if (iCol == 7) {
                    DeleteUploadRMGDocsDetail(selectedDocumentId);
                }
                else {

                    if (iCol == 6) {
                        ShowRMGDocUploadHistoryDetails(selectedDocumentId, rowData['UploadType']);
                    }
                }
            }
        }).navGrid("#jqTablePagerRMGUploadDoc",
            { search: false, refresh: false, add: false, edit: false, del: false },
                {}, // settings for edit
                {}, // settings for add
                {}, // settings for delete
                {} // Search options. Some options can be set on column level
         );






        $('#uploads').click(function () {
            if ($("#photo").val() != "") {
                if ($('#frmUploadHRDocument').valid()) {
                    DisplayLoadingDialog(); // Checked global.js
                }

                $('#frmUploadHRDocument').ajaxForm({
                    success: function (results) {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        var st = $.parseJSON(results);
                        if (st.status == true) {
                            jQuery("#jqTableHrUploadDoc").trigger("reloadGrid");
                            $('#showSucceessHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Upload Document",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () {
                                        $(this).dialog('close');
                                        if ($.browser.msie) {
                                            $('#photo').replaceWith($('#photo').clone(true));
                                        }
                                        else {
                                            $('#photo').val('');
                                        }

                                        $('#txtFileDescription').val('');
                                        $('#txtCurrentState').val('');
                                        $('#UploadTypeId').val('');
                                        $("#UploadTypeId").next().find(".sbSelector").text("Select");
                                    }
                                },
                                close: function () {

                                    if ($.browser.msie) {
                                        $('#photo').replaceWith($('#photo').clone(true));
                                    }
                                    else {
                                        $('#photo').val('');
                                    }

                                    $('#txtFileDescription').val('');
                                    $('#txtCurrentState').val('');
                                    $('#UploadTypeId').val('');
                                    $("#UploadTypeId").next().find(".sbSelector").text("Select");
                                }
                            });
                        }
                        else {
                            $("#loading").dialog("close");
                            $("#loading").dialog("destroy");
                            $('#errorHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Error",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () { $(this).dialog('close'); }
                                }
                            });
                        }
                    },
                    error: function () {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        $('#errorHRUploadDocumentDialog').dialog({
                            modal: true,
                            resizable: false,
                            width: 300,
                            height: 'auto',
                            title: "Error",
                            dialogClass: "noclose",
                            buttons: {
                                "OK": function () { $(this).dialog('close'); }
                            }
                        });
                    }
                });
            }
            else {
                $("#fileUploadError").text("Please select File to upload");
                return;
            }
        });

        //   RMG Upload File Cick Starts Below      

        $('#RMGuploads').click(function () {
            if ($("#RMGphoto").val() != "") {
                if ($('#frmUploadRMGDocument').valid()) {
                    DisplayLoadingDialog(); // Checked global.js
                }

                $('#frmUploadRMGDocument').ajaxForm({
                    success: function (results) {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        var st = $.parseJSON(results);
                        if (st.status == true) {
                            jQuery("#jqTableRMGUploadDoc").trigger("reloadGrid");
                            $('#showSucceessHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Upload Document",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () {
                                        $(this).dialog('close');
                                        if ($.browser.msie) {
                                            $('#RMGphoto').replaceWith($('#RMGphoto').clone(true));
                                        }
                                        else {
                                            $('#RMGphoto').val('');
                                        }

                                        $('#txtRMGFileDescription').val('');
                                        $('#txtRMGCurrentState').val('');

                                    }
                                },
                                close: function () {

                                    if ($.browser.msie) {
                                        $('#RMGphoto').replaceWith($('#RMGphoto').clone(true));
                                    }
                                    else {
                                        $('#RMGphoto').val('');
                                    }

                                    $('#txtRMGFileDescription').val('');
                                    $('#txtRMGCurrentState').val('');


                                }
                            });
                        }
                        else {
                            $("#loading").dialog("close");
                            $("#loading").dialog("destroy");
                            $('#errorHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Error",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () { $(this).dialog('close'); }
                                }
                            });
                        }
                    },
                    error: function () {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        $('#errorHRUploadDocumentDialog').dialog({
                            modal: true,
                            resizable: false,
                            width: 300,
                            height: 'auto',
                            title: "Error",
                            buttons: {
                                "OK": function () { $(this).dialog('close'); }
                            }
                        });
                    }
                });
            }
            else {
                $("#fileUploadError").text("Please select File to upload");
                return;
            }
        });







        $('#RMGuploads').click(function () {
            if ($("#photo").val() != "") {
                if ($('#frmUploadRMGDocument').valid()) {
                    DisplayLoadingDialog(); // Checked global.js
                }

                $('#frmUploadRMGDocument').ajaxForm({
                    success: function (results) {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        var st = $.parseJSON(results);
                        if (st.status == true) {
                            jQuery("#jqTableRMGUploadDoc").trigger("reloadGrid");
                            $('#showSucceessHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Upload Document",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () {
                                        $(this).dialog('close');
                                        if ($.browser.msie) {
                                            $('#RMGphoto').replaceWith($('#RMGphoto').clone(true));
                                        }
                                        else {
                                            $('#RMGphoto').val('');
                                        }

                                        $('#txtRMGFileDescription').val('');
                                        $('#txtRMGCurrentState').val('');
                                    }
                                },
                                close: function () {

                                    if ($.browser.msie) {
                                        $('#RMGphoto').replaceWith($('#RMGphoto').clone(true));
                                    }
                                    else {
                                        $('#RMGphoto').val('');
                                    }

                                    $('#txtRMGFileDescription').val('');
                                    $('#txtRMGCurrentState').val('');

                                }
                            });
                        }
                        else {
                            $("#loading").dialog("close");
                            $("#loading").dialog("destroy");
                            $('#errorHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Error",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () { $(this).dialog('close'); }
                                }
                            });
                        }
                    },
                    error: function () {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        $('#errorHRUploadDocumentDialog').dialog({
                            modal: true,
                            resizable: false,
                            width: 300,
                            height: 'auto',
                            title: "Error",
                            dialogClass: "noclose",
                            buttons: {
                                "OK": function () { $(this).dialog('close'); }
                            }
                        });
                    }
                });
            }
            else {
                $("#fileUploadError").text("Please select File to upload");
                return;
            }
        });



        $('#uploadsDoc').click(function () {
            if ($("#FileUpload1").val() != "") {
                if ($('#frmUploadHRDocument1').valid()) {
                    DisplayLoadingDialog(); // Checked global.js
                }

                $('#frmUploadHRDocument1').ajaxForm({
                    success: function (results) {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        var st = $.parseJSON(results);
                        if (st.status == true) {
                            $('#showSucceessHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Upload Document",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () {
                                        $(this).dialog('close');

                                        if ($.browser.msie) {
                                            $('#FileUpload1').replaceWith($('#FileUpload1').clone(true));
                                        }
                                        else {
                                            $('#FileUpload1').val('');
                                        }

                                    }
                                    //,
                                    //									close: function () {

                                    //										if ($.browser.msie) {
                                    //											$('#FileUpload1').replaceWith($('#FileUpload1').clone(true));
                                    //										}
                                    //										else {
                                    //											$('#FileUpload1').val('');
                                    //										}
                                    //									}
                                }
                            });
                        }
                        else {
                            $("#loading").dialog("close");
                            $("#loading").dialog("destroy");
                            $('#errorHRUploadDocumentDialog').dialog({
                                modal: true,
                                resizable: false,
                                width: 300,
                                height: 'auto',
                                title: "Error",
                                dialogClass: "noclose",
                                buttons: {
                                    "OK": function () { $(this).dialog('close'); }
                                }
                            });
                        }
                    },
                    error: function () {
                        $("#loading").dialog("close");
                        $("#loading").dialog("destroy");
                        $('#errorHRUploadDocumentDialog').dialog({
                            modal: true,
                            resizable: false,
                            width: 300,
                            height: 'auto',
                            title: "Error",
                            dialogClass: "noclose",
                            buttons: {
                                "OK": function () { $(this).dialog('close'); }
                            }
                        });
                    }
                });
            }
            else {
                $("#fileUploadError").text("Please select File to upload");
                return;
            }
        });
    });


    function DeleteUploadDocsDetail(selectedDocumentId) {
        $('#deleteAllFileHistoryConfirm').dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            width: 300,
            height: 'auto',
            title: "Delete Document",
            dialogClass: "noclose",
            buttons: {
                "Ok": function () {
                    $("#deleteAllFileHistoryConfirm").dialog('close');
                    DisplayLoadingDialog(); // Checked global.js
                    DeletionDialogHR(selectedDocumentId);
                },
                "Cancel": function () { $(this).dialog('close'); }
            }
        });
        $("#deleteAllFileHistoryConfirm").dialog('open');
    }

    function DeletionDialogHR(selectedDocumentId) {
        $("#DeleteHRDocUploadSuccessMessage").dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            width: 300,
            height: 'auto',
            title: "Deleted",
            buttons: {
                "Ok": function () {
                    $(this).dialog('close');
                }
            }
        });

        $.ajax({
            url: '@Url.Action("DeleteHRUploadDetails", "Uploads")',
            data: { documentId: selectedDocumentId },
            success: function (results) {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");
                if (results == true) {
                    jQuery("#jqTableHrUploadDoc").trigger("reloadGrid");
                    $("#deleteAllFileHistoryConfirm").dialog('close');
                    $("#DeleteHRDocUploadSuccessMessage").dialog('open');
                }
                else {
                    $("#deleteAllFileHistoryConfirm").dialog('close');
                    errorOccured();
                }
            },
            Error: function () {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");

                errorOccured();
            }
        });
    }


    function DeleteUploadRMGDocsDetail(selectedDocumentId) {
        $('#deleteAllFileHistoryConfirm').dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            width: 300,
            height: 'auto',
            title: "Delete Document",
            dialogClass: "noclose",
            buttons: {
                "Ok": function () {
                    $("#deleteAllFileHistoryConfirm").dialog('close');
                    DisplayLoadingDialog(); // Checked global.js
                    DeletionDialog(selectedDocumentId);
                },
                "Cancel": function () { $(this).dialog('close'); }
            }
        });
        $("#deleteAllFileHistoryConfirm").dialog('open');
    }

    function DeletionDialog(selectedDocumentId) {
        $("#DeleteHRDocUploadSuccessMessage").dialog({
            autoOpen: false,
            modal: true,
            resizable: false,
            width: 300,
            height: 'auto',
            title: "Deleted",
            buttons: {
                "Ok": function () {
                    $(this).dialog('close');
                }
            }
        });

        $.ajax({
            url: '@Url.Action("DeleteRMGUploadDetails", "Uploads")',
            data: { documentId: selectedDocumentId },
            success: function (results) {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");
                if (results == true) {
                    jQuery("#jqTableRMGUploadDoc").trigger("reloadGrid");
                    $("#deleteAllFileHistoryConfirm").dialog('close');
                    $("#DeleteHRDocUploadSuccessMessage").dialog('open');
                }
                else {
                    $("#deleteAllFileHistoryConfirm").dialog('close');
                    errorOccured();
                }
            },
            Error: function () {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");

                errorOccured();
            }
        });
    }


    function ShowHRDocUploadHistoryDetails(selectedDocumentId, type) {
        DisplayLoadingDialog(); // Checked global.js

        $("#ShowHRDocUploadHistory").dialog({
            autoOpen: false,
            modal: true,
            width: 'auto',
            height: 400,
            dialogClass: "noclose",
            title: "Document History",
            buttons: {
                "Ok": function () {
                    $(this).dialog('close');
                }
            }
        });

        $.ajax({
            url: '@Url.Action("ShowHistoryHrDocUploads", "Uploads")',
            cache: false,
            data: { documentId: selectedDocumentId, uploadType: type },
            success: function (data) {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");

                $("#ShowHRDocUploadHistory").html(data).dialog('open');
            },
            Error: function () {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");
                errorOccured();
            }
        });
    }


    /// Show RMG Details

    function ShowRMGDocUploadHistoryDetails(selectedDocumentId, type) {
        DisplayLoadingDialog(); // Checked global.js

        $("#ShowHRDocUploadHistory").dialog({
            autoOpen: false,
            modal: true,
            width: 'auto',
            height: 400,
            title: "Document History",
            dialogClass: "noclose",
            buttons: {
                "Ok": function () {
                    $(this).dialog('close');
                }
            }
        });

        $.ajax({
            url: '@Url.Action("ShowHistoryRMGDocUploads", "Uploads")',
            cache: false,
            data: { documentId: selectedDocumentId, uploadType: type },
            success: function (data) {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");

                $("#ShowHRDocUploadHistory").html(data).dialog('open');
            },
            Error: function () {
                $("#loading").dialog("close");
                $("#loading").dialog("destroy");
                errorOccured();
            }
        });
    }

</script>
@*-----------------------*@
<section class="EmployeeContainer Container">
    <div class="FixedHeader">
        <div class="clearfix">
            <h2 class="MainHeading">
                Uploads</h2>
        </div>
        <nav class="sub-menu-colored">
            <a href="#" class="selected">Uploads</a>
        </nav>
    </div>
    <div class="MainBody hrmF RequestorADDNEW">
        <div class="rwrap clearfix">
            @*--------------------------------------------HRM Starts --------------------------------*@
            @using (Html.BeginForm("UploadHRDocument", "Uploads", FormMethod.Post, new { enctype = "multipart/form-data", @id = "frmUploadHRDocument" }))
                           {
                <div class="clearfix UploadsPage FormContainerBox">
                    @*<div class="CandidateLeftcol clearfix mrgnB30">*@
                    <div class="leftcol">
                        <div class="formrow clearfix">
                            <div class="LabelDiv">
                                <span class="mandatory">*</span>@Html.Label("Upload Type:")
                            </div>
                            <div class="InputDiv">
                                @Html.DropDownListFor(model => model.UploadTypeId, new SelectList(Model.UploadTypeValues, "Value", "Text", "UploadTypeId"), "Select", new { @class = "ValidationDropDown" })
                                @*  @Html.DropDownListFor(model => model.CategoryId, new SelectList(Model.TrainingProgramList, "CategoryId", "Category", "Select"), "Select", new { @class = "ValidationDropDown" })*@
                                <p class="qualif-detail">@Html.ValidationMessageFor(model => model.UploadTypeId)</p>
                            </div>
                        </div>
                        <div class="formrow clearfix">
                            <div class="LabelDiv">
                                <span class="mandatory">*</span>@Html.Label("File:")
                            </div>
                            <div class="InputDiv positionR">
                                <input type="file" name="doc" id="photo" size="24" data-val="true" data-val-required="please select a file to Upload"
                                    class="FileUploadBtn" style="width: 100px" />
                                <div class="BrowserVisible">
                                    <input type="button" class="BtnForCustomUpload" value="Browse.." /><input type="text"
                                        id="FileEmpFieldH" class="FileField" value="No files selected" /></div>
                                <p class="qualif-detail">
                                    <span id="fileUploadError" class="field-validation-error"></span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="rightcol">
                        <div class="formrow clearfix">
                            <div class="LabelDiv">
                                <span class="mandatory">*</span>@Html.Label("File Description:")
                            </div>
                            <div class="InputDiv">
                                @Html.TextBoxFor(model => model.FileDescription, new { @id = "txtFileDescription" })
                                <p class="qualif-detail">@Html.ValidationMessageFor(model => model.FileDescription)</p>
                            </div>
                        </div>
                        <div class="formrow clearfix">
                            <div class="LabelDiv">
                                <span class="hiddenstar">*</span>@Html.Label("Comment:")
                            </div>
                            <div class="InputDiv">
                                @Html.TextAreaFor(model => model.Comments, new { @id = "txtCurrentState" })
                                @Html.ValidationMessageFor(model => model.Comments)
                            </div>
                        </div>
                    </div>
                    @*  </div>*@
                </div>
                <div class="ButtonContainer1 clearfix">
                    <input type="submit" value="Upload" id="uploads" class="ButtonGray" />
                </div>
                           }
            <div id="showDetails">
                <span>
                    <div class="tablestyle3">
                        <table id="jqTableHrUploadDoc" class="scroll">
                        </table>
                        <div id="jqTablePagerHrUploadDoc">
                        </div>
                    </div>
                </span>
            </div>
            @*--------------------------------------------HRM Ends ---------------------------------*@
            @using (Html.BeginForm("Importexcel", "Uploads", FormMethod.Post, new { enctype = "multipart/form-data", @id = "frmUploadHRDocument1" }))
                       {
                <div class="InnerContainer">
                    <h4 class="SmallHeading">
                        RMG Upload</h4>
                </div>                                                
                <div class="clearfix">
                    <div class="clearfix sec3C UploadsPage FormContainerBox">
                        <div class="leftcol">
                            <div class="formrow clearfix">
                                <div class="LabelDiv">
                                    @Html.Label("File:")
                                </div>
                                <div class="InputDiv positionR">
                                    <input type="file" name="doc" id="FileUpload1" size="24" data-val="true" data-val-required="please select a file to Upload"
                                        class="FileUploadBtn" style="width: 100px" />
                                    <div class="BrowserVisible">
                                        <input type="button" class="BtnForCustomUpload" value="Browse.." /><input type="text"
                                            id="FileEmpField1" class="FileField" value="No files selected" /></div>
                                    <p class="qualif-detail">
                                        <span id="EmpfileUploadErrorR" class="field-validation-error"></span>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ButtonContainer1">
                        <input type="submit" value="Upload" id="uploadsDoc" class="ButtonGray" />
                    </div>
                </div>
                       }
            @using (Html.BeginForm("UploadRMGDocument", "Uploads", FormMethod.Post, new { enctype = "multipart/form-data", @id = "frmUploadRMGDocument" }))
                     {
                <div class="InnerContainer">
                    <h4 class="SmallHeading">
                        RMG Upload</h4>
                </div>
                <div class="clearfix FormContainerBox UploadsPage">
                    <div class="leftcol">
                        <div class="formrow clearfix">
                            <div class="LabelDiv">
                                <span class="mandatory">*</span> @Html.Label("File:")
                            </div>
                            <div class="InputDiv positionR">
                                <input type="file" name="doc" id="RMGphoto" size="24" data-val="true" data-val-required="please select a file to Upload"
                                    class="FileUploadBtn" style="width: 100px" />
                                <div class="BrowserVisible">
                                    <input type="button" class="BtnForCustomUpload" value="Browse.." /><input type="text"
                                        id="FileRMGphotoField" class="FileField" value="No files selected" /></div>
                                <p class="qualif-detail">
                                    <span id="EmpfileUploadError" class="field-validation-error"></span>
                                </p>
                            </div>
                        </div>
                        <div class="formrow clearfix">
                            <div class="LabelDiv">
                                @Html.Label("Comment:")
                            </div>
                            <div class="InputDiv">
                                @Html.TextAreaFor(model => model.Comments, new { @id = "txtRMGCurrentState" })
                                @Html.ValidationMessageFor(model => model.Comments)
                            </div>
                        </div>
                    </div>
                    <div class="rightcol">
                        <div class="formrow clearfix">
                            <div class="LabelDiv">
                                <span class="mandatory">*</span>@Html.Label("File Description:")
                            </div>
                            <div class="InputDiv">
                                @Html.TextBoxFor(model => model.FileDescription, new { @id = "txtRMGFileDescription" })
                                <p class="qualif-detail">@Html.ValidationMessageFor(model => model.FileDescription)</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ButtonContainer1 clearfix">
                    <input type="submit" value="Upload" id="RMGuploads" class="ButtonGray" />
                </div>
                     }
            <div id="showRMGDetails">
                <span>
                    <div class="tablestyle3">
                        <table id="jqTableRMGUploadDoc" class="scroll">
                        </table>
                        <div id="jqTablePagerRMGUploadDoc">
                        </div>
                    </div>
                </span>
            </div>
        </div>
    </div>
</section>
@*-------------------------*@ @*========================== RMG Details end Here =============================*@
<div id="deleteAllFileHistoryConfirm" style="display: none">
    <div>
        Are you sure you want to delete this File Details?
    </div>
    <div>
        Check<b> Details </b>before you click on <b>OK</b>
    </div>
</div>
<div id="DeleteHRDocUploadSuccessMessage" style="display: none">
    <p>
        Record has been deleted</p>
</div>
<div id="ShowHRDocUploadHistory">
</div>
<div id="showSucceessHRUploadDocumentDialog" style="display: none">
    <center class="LoadingWrap">
        Document has been uploaded.</center>
</div>
<div id="errorHRUploadDocumentDialog" style="display: none">
    Some error occurred while uploading document.Please try again.</div>
<div class="progressbar fileupload-progressbar">
</div>
<div id="UploadError" title="Error" style="display: none">
    <p>
        Please check the file you are uploading
    </p>
    <p>
        '.exe' file is not allowed to upload
    </p>
</div>
<div id="ShowUploadDocMessage" style="display: none">
    Document uploaded Succesfully
</div>
<div id="ShowRMGUploadDocMessage" style="display: none">
    Document uploaded Succesfully
</div>
